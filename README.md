# ะกะธััะตะผะฐ ะฒะธะดะตะพะฝะฐะฑะปัะดะตะฝะธั (Video Surveillance System)

ะะพะปะฝะพััะฝะบัะธะพะฝะฐะปัะฝะฐั ัะธััะตะผะฐ ะฒะธะดะตะพะฝะฐะฑะปัะดะตะฝะธั ั ะฟะพะดะดะตัะถะบะพะน RTSP/RTP/HTTP ะบะฐะผะตั, ะดะตัะตะบัะพัะฐ ะดะฒะธะถะตะฝะธั MOG2 ะธ ะทะฐะฟะธััั ะฒะธะดะตะพ.

## ะะพะทะผะพะถะฝะพััะธ

- โ ะะพะฑะฐะฒะปะตะฝะธะต ะบะฐะผะตั (RTSP/RTP/HTTP)
- โ ะะฒัะพัะธะทะฐัะธั ะฝะฐ ะบะฐะผะตัะฐั (username/password)
- โ ะะดะฝะพ ะฟะพะดะบะปััะตะฝะธะต ะบ ะบะฐะถะดะพะน ะบะฐะผะตัะต (singleton)
- โ ะะฒัะพะพะฟัะตะดะตะปะตะฝะธะต ัะพัะผะฐัะฐ ะฒะธะดะตะพ (ะบะพะดะตะบ/ัะฐะทัะตัะตะฝะธะต/ะฑะธััะตะนั/FPS)
- โ ะะตัะตะบัะพั ะดะฒะธะถะตะฝะธั MOG2 ั ะธัะบะปััะตะฝะธะตะผ ะทะพะฝ
- โ ะะฐะฟะธัั ะฒะธะดะตะพ ะฒ ะธััะพะดะฝะพะผ ัะพัะผะฐัะต ะฑะตะท ะบะพะฝะฒะตััะฐัะธะธ
- โ Live preview ัะตัะตะท WebSocket
- โ ะะปะตะตั ะทะฐะฟะธัะตะน ั ััะบะพัะตะฝะฝัะผ ะฒะพัะฟัะพะธะทะฒะตะดะตะฝะธะตะผ (x1, x2, x4, x6, x8, x10)
- โ ะะตะดะฐะบัะพั ะทะพะฝ ะธัะบะปััะตะฝะธั ะดะปั ะดะตัะตะบัะพัะฐ ะดะฒะธะถะตะฝะธั
- โ ะะพะดััะตั ัะพะฑััะธะน ะดะฒะธะถะตะฝะธั
- โ Docker ัะฟะฐะบะพะฒะบะฐ ะดะปั ะปะพะบะฐะปัะฝะพะณะพ ะทะฐะฟััะบะฐ
- โ **ะะพะปะฝะพัััั ะฐะฒัะพะฝะพะผะฝะฐั ัะฐะฑะพัะฐ (ะฑะตะท ะธะฝัะตัะฝะตัะฐ)**
- โ **ะะฐะฑะพัะฐ ะฒ ะปะพะบะฐะปัะฝะพะน ัะตัะธ ั ะปัะฑัะผ hostname/IP**
- โ **ะะตั ะพะณัะฐะฝะธัะตะฝะธะน CORS**

## ะขะตัะฝะพะปะพะณะธะธ

**Backend:**
- FastAPI
- OpenCV (cv2) - ะดะตัะตะบัะพั ะดะฒะธะถะตะฝะธั MOG2
- FFmpeg - ัะฐะฑะพัะฐ ั ะฒะธะดะตะพะฟะพัะพะบะฐะผะธ
- WebSocket - live streaming
- MongoDB - ััะฐะฝะตะฝะธะต ะดะฐะฝะฝัั ะบะฐะผะตั ะธ ะทะฐะฟะธัะตะน
- Motor - async MongoDB driver

**Frontend:**
- React 19
- React Router
- Tailwind CSS
- Shadcn UI
- Axios
- WebSocket API

## ะฃััะฐะฝะพะฒะบะฐ ะธ ะทะฐะฟััะบ

### ๐ ะัััััะน ััะฐัั (ะปะพะบะฐะปัะฝะฐั ัะตัั)

ะะฒัะพะผะฐัะธัะตัะบะฐั ะฝะฐัััะพะนะบะฐ ะดะปั ัะฐะฑะพัั ะฒ ะปะพะบะฐะปัะฝะพะน ัะตัะธ:

```bash
git clone <repository-url>
cd <repository-name>
./scripts/setup-local-network.sh
```

ะกะบัะธะฟั ะฐะฒัะพะผะฐัะธัะตัะบะธ:
- ะัะพะฒะตัะธั Docker
- ะะฐัััะพะธั firewall
- ะะฐะฟัััะธั ะฟัะธะปะพะถะตะฝะธะต
- ะะพะบะฐะถะตั IP ะฐะดัะตั ะดะปั ะดะพัััะฟะฐ ะธะท ัะตัะธ

### Docker Compose (ัััะฝะฐั ะฝะฐัััะพะนะบะฐ)

1. ะะปะพะฝะธััะนัะต ัะตะฟะพะทะธัะพัะธะน:
```bash
git clone <repository-url>
cd <repository-name>
```

2. ะัะพะฒะตัััะต ะฝะฐะปะธัะธะต ะฒัะตั ัะฐะนะปะพะฒ (ะพะฟัะธะพะฝะฐะปัะฝะพ):
```bash
./scripts/check-repo.sh
```

3. ะะฐะฟัััะธัะต ะฟัะธะปะพะถะตะฝะธะต:
```bash
docker-compose up --build -d
```

4. ะัะบัะพะนัะต ะฑัะฐัะทะตั:
```
# ะะฐ ัะพะผ ะถะต ะะ:
http://localhost:8001

# ะก ะดััะณะธั ััััะพะนััะฒ ะฒ ะปะพะบะฐะปัะฝะพะน ัะตัะธ:
http://<IP-ะฐะดัะตั-ัะตัะฒะตัะฐ>:8001
# ะะฐะฟัะธะผะตั: http://192.168.1.100:8001
```

5. ะััะฐะฝะพะฒะบะฐ:
```bash
docker-compose down
```

**๐ ะะพะดัะพะฑะฝะฐั ะธะฝััััะบัะธั ะฟะพ ะปะพะบะฐะปัะฝะพะน ัะตัะธ:** ะกะผ. `LOCAL_NETWORK_SETUP.md`

### ะะพะบะฐะปัะฝัะน ะทะฐะฟััะบ (ะดะปั ัะฐะทัะฐะฑะพัะบะธ)

#### Backend

1. ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ:
```bash
cd backend
pip install -r requirements.txt
```

2. ะกะพะทะดะฐะนัะต ัะฐะนะป `.env`:
```
MONGO_URL=mongodb://localhost:27017
DB_NAME=surveillance_db
CORS_ORIGINS=*
```

3. ะะฐะฟัััะธัะต ัะตัะฒะตั:
```bash
uvicorn server:app --host 0.0.0.0 --port 8001 --reload
```

#### Frontend

1. ะฃััะฐะฝะพะฒะธัะต ะทะฐะฒะธัะธะผะพััะธ:
```bash
cd frontend
yarn install
```

2. ะกะพะทะดะฐะนัะต ัะฐะนะป `.env`:
```
REACT_APP_BACKEND_URL=http://localhost:8001
```

3. ะะฐะฟัััะธัะต ัะตัะฒะตั ัะฐะทัะฐะฑะพัะบะธ:
```bash
yarn start
```

## ะัะฟะพะปัะทะพะฒะฐะฝะธะต

### ะะพะฑะฐะฒะปะตะฝะธะต ะบะฐะผะตัั

1. ะะฐะถะผะธัะต ะบะฝะพะฟะบั "Add Camera"
2. ะะฐะฟะพะปะฝะธัะต ัะพัะผั:
   - **Camera Name**: ะฝะฐะทะฒะฐะฝะธะต ะบะฐะผะตัั
   - **Camera URL**: RTSP/RTP/HTTP URL
     - ะัะธะผะตัั:
       - `rtsp://192.168.1.100:554/stream1`
       - `http://192.168.1.100:8080/video`
       - `rtsp://username:password@192.168.1.100:554/stream1` (ั ะฐะฒัะพัะธะทะฐัะธะตะน ะฒ URL)
   - **Username**: (ะพะฟัะธะพะฝะฐะปัะฝะพ) ะธะผั ะฟะพะปัะทะพะฒะฐัะตะปั ะดะปั ะฐะฒัะพัะธะทะฐัะธะธ
   - **Password**: (ะพะฟัะธะพะฝะฐะปัะฝะพ) ะฟะฐัะพะปั ะดะปั ะฐะฒัะพัะธะทะฐัะธะธ
3. ะะฐะถะผะธัะต "Add Camera"

ะะฐะผะตัะฐ ะฑัะดะตั ะดะพะฑะฐะฒะปะตะฝะฐ ะธ ะฐะฒัะพะผะฐัะธัะตัะบะธ ะฟะพะดะบะปััะธััั. ะกะธััะตะผะฐ ะพะฟัะตะดะตะปะธั:
- ะะพะดะตะบ (H.264, MJPEG ะธ ั.ะด.)
- ะะฐะทัะตัะตะฝะธะต (1920x1080, 1280x720 ะธ ั.ะด.)
- FPS (ัะฐััะพัะฐ ะบะฐะดัะพะฒ)
- ะะธััะตะนั

### ะฃะฟัะฐะฒะปะตะฝะธะต ะบะฐะผะตัะพะน

- **Start Camera**: ะทะฐะฟัััะธัั ะฟะพะดะบะปััะตะฝะธะต ะบ ะบะฐะผะตัะต
- **View Live**: ะฟัะพัะผะพัั live stream
- **Start Recording**: ะฝะฐัะฐัั ะทะฐะฟะธัั
- **Stop Recording**: ะพััะฐะฝะพะฒะธัั ะทะฐะฟะธัั
- **Stop Camera**: ะพััะฐะฝะพะฒะธัั ะฟะพะดะบะปััะตะฝะธะต

### ะะตะดะฐะบัะธัะพะฒะฐะฝะธะต ะทะพะฝ ะธัะบะปััะตะฝะธั

1. ะัะบัะพะนัะต ะบะฐะผะตัั (View Live)
2. ะะฐะถะผะธัะต "Edit Exclusion Zones"
3. ะะฐะถะผะธัะต "Start Drawing Zone"
4. ะะปะธะบะฐะนัะต ะฝะฐ canvas, ััะพะฑั ัะพะทะดะฐัั ะฟะพะปะธะณะพะฝ (ะผะธะฝะธะผัะผ 3 ัะพัะบะธ)
5. ะะฐะถะผะธัะต "Finish Zone"
6. ะะฐะถะผะธัะต "Save Zones"

ะะพะฝั ะธัะบะปััะตะฝะธั โ ััะพ ะพะฑะปะฐััะธ, ะณะดะต ะดะตัะตะบัะพั ะดะฒะธะถะตะฝะธั ะฑัะดะตั ะพัะบะปััะตะฝ (ะฝะฐะฟัะธะผะตั, ะดะตัะตะฒัั, ัะปะฐะณะธ, ะดะพัะพะณะธ).

### ะัะพัะผะพัั ะทะฐะฟะธัะตะน

1. ะะฐะถะผะธัะต "Recordings" ะฒ ะณะปะฐะฒะฝะพะผ ะผะตะฝั
2. ะัะฑะตัะธัะต ะทะฐะฟะธัั ะธะท ัะฟะธัะบะฐ
3. ะะฐะถะผะธัะต "Play"
4. ะัะฑะตัะธัะต ัะบะพัะพััั ะฒะพัะฟัะพะธะทะฒะตะดะตะฝะธั (x1 - x10)
5. ะะปะธ ะฝะฐะถะผะธัะต "Download" ะดะปั ัะบะฐัะธะฒะฐะฝะธั ัะฐะนะปะฐ

## ะััะธัะตะบัััะฐ

```
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                   Frontend (React)              โ
โ  - Dashboard (ัะฟะธัะพะบ ะบะฐะผะตั)                     โ
โ  - AddCamera (ัะพัะผะฐ ะดะพะฑะฐะฒะปะตะฝะธั)                 โ
โ  - CameraView (live preview + zone editor)      โ
โ  - RecordingsView (ัะฟะธัะพะบ ะธ ะฟะปะตะตั)              โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ HTTP/WebSocket
โโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ              Backend (FastAPI)                   โ
โ  - Camera Manager (singleton connections)       โ
โ  - Video Processor (MOG2 + exclusion zones)     โ
โ  - Recording Service (original format)          โ
โ  - Stream Service (WebSocket live preview)      โ
โโโโโโโโโโโโโโโโโโโฌโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
                  โ
โโโโโโโโโโโโโโโโโโโผโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
โ                MongoDB                           โ
โ  - cameras (ะบะพะฝัะธะณััะฐัะธั ะบะฐะผะตั)                 โ
โ  - recordings (ะผะตัะฐะดะฐะฝะฝัะต ะทะฐะฟะธัะตะน)              โ
โโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโโ
```

## API Endpoints

### Cameras

- `POST /api/cameras` - ะดะพะฑะฐะฒะธัั ะบะฐะผะตัั
- `GET /api/cameras` - ะฟะพะปััะธัั ัะฟะธัะพะบ ะบะฐะผะตั
- `GET /api/cameras/{id}` - ะฟะพะปััะธัั ะบะฐะผะตัั
- `PUT /api/cameras/{id}` - ะพะฑะฝะพะฒะธัั ะบะฐะผะตัั (ะทะพะฝั ะธัะบะปััะตะฝะธั)
- `DELETE /api/cameras/{id}` - ัะดะฐะปะธัั ะบะฐะผะตัั
- `POST /api/cameras/{id}/start` - ะทะฐะฟัััะธัั ะบะฐะผะตัั
- `POST /api/cameras/{id}/stop` - ะพััะฐะฝะพะฒะธัั ะบะฐะผะตัั
- `POST /api/cameras/{id}/record/start` - ะฝะฐัะฐัั ะทะฐะฟะธัั
- `POST /api/cameras/{id}/record/stop` - ะพััะฐะฝะพะฒะธัั ะทะฐะฟะธัั

### Recordings

- `GET /api/recordings` - ะฟะพะปััะธัั ัะฟะธัะพะบ ะทะฐะฟะธัะตะน
- `GET /api/recordings/{id}/download` - ัะบะฐัะฐัั ะทะฐะฟะธัั
- `GET /api/recordings/{id}/stream?speed=2` - ัััะธะผ ะทะฐะฟะธัะธ ั ััะบะพัะตะฝะธะตะผ

### WebSocket

- `WS /api/ws/camera/{id}` - live stream ะบะฐะผะตัั

## ะัะพะธะทะฒะพะดะธัะตะปัะฝะพััั

- Live stream: ~30 FPS @ 640x360 (JPEG quality 60%)
- ะะฐะฟะธัั: ะธััะพะดะฝะพะต ัะฐะทัะตัะตะฝะธะต ะธ ัะพัะผะฐั ะฑะตะท ะบะพะฝะฒะตััะฐัะธะธ
- MOG2 ะพะฑัะฐะฑะพัะบะฐ: ะฒ ัะตะฐะปัะฝะพะผ ะฒัะตะผะตะฝะธ
- WebSocket: ะฑะธะฝะฐัะฝะฐั ะฟะตัะตะดะฐัะฐ JPEG frames

## ะขัะตะฑะพะฒะฐะฝะธั

- Python 3.11+
- Node.js 20+ (ััะตะฑัะตััั ะดะปั React Router DOM 7.9)
- MongoDB 7.0+
- FFmpeg
- OpenCV
- 2GB+ RAM (ะฒ ะทะฐะฒะธัะธะผะพััะธ ะพั ะบะพะปะธัะตััะฒะฐ ะบะฐะผะตั)

## ะะธัะตะฝะทะธั

MIT

## ะะฒัะพั

ะกะพะทะดะฐะฝะพ ั ะฟะพะผะพััั Emergent AI
